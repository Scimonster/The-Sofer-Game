<script src="jquery-2.0.3.min.js" type="text/javascript"></script>
<!--<script src="https://raw.github.com/zachstronaut/jquery-animate-css-rotate-scale/master/jquery-animate-css-rotate-scale.js"></script>-->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<style>@font-face {
  font-family: 'Sofer';
  src: local("Stam Ashkenaz CLM"),
  local("Stam Ashkenaz"),
  local("Stam Sefarad CLM"),
  local("Stam Sefarad"),
  url("fonts/StamAshkenazCLM.ttf"),
  url("fonts/StamAshkenazCLM.woff");
  font-weight: bold;
}</style>
<script>
var
	points = 0,
	outside = "#09099C",
	inside = "#9ADFF6",
	font = "7.0pt Sofer,serif bold",
	welcomeFont = "5.0pt serif bold",
	fontColor = "black",
	can,
	ctx;

$(document).ready(function(){
	
	can = $('#world');
//	can.mousemove(function(e){$('#paths').html(e.clientX + ', ' + e.clientY)});
	can.css('backgroundColor',outside);
	$(window).keypress(function(e){
//		console.log(e.keyCode);
		if (e.keyCode == 33) { // pg up
			$('#locator').css('top','-=100');
			e.preventDefault();
		}
		if (e.keyCode == 34) { // pg dn
			$('#locator').css('top','+=100');
			e.preventDefault();
		}
		if (e.keyCode == 35) { // end
			$('#locator').css('left','+=100');
			e.preventDefault();
		}
		if (e.keyCode == 36) { // home
			$('#locator').css('left','-=100');
			e.preventDefault();
		}
		if (e.keyCode == 37) { // left
			$('#locator').css('left','-=10');
			e.preventDefault();
		}
		if (e.keyCode == 39) { // right
			$('#locator').css('left','+=10');
			e.preventDefault();
		}
		if (e.keyCode == 38) { // up
			$('#locator').css('top','-=10');
			e.preventDefault();
		}
		if (e.keyCode == 40) { // down
			$('#locator').css('top','+=10');
			e.preventDefault();
		}
	});
	ctx = can[0].getContext('2d');

	var img = new Image();
	img.src = 'tiles.png';
	img.onload = function(){
		inside = ctx.createPattern(img,'repeat');
		lvl15();
	};
});

function lvl15(){
	can.css({top:0,left:0});
	// paint maze
	ctx.fillStyle = outside;
	ctx.fillRect(0, 0, $('#world').width(), $('#world').height());
	//ctx.fillStyle = "rgba(200,200,100,0.7)";
	ctx.fillStyle = inside;
	ctx.beginPath();
	ctx.rect( 10,   0,  30, 150); // v // down to start
	ctx.rect( 10,  80, 120,  30); // h // right at ל
	ctx.rect(120,  10,  30, 150); // י choice
	ctx.rect(120, 160, 150,  30); // right after י
	ctx.rect(200, 160,  30, 100); // down at י fail
	ctx.rect(270,  10,  30, 180); // up after י
	ctx.rect(160,  60, 110,  30); // left at ו fail
	ctx.rect(160,  60,  30,  90); // down
	ctx.rect(270,  10, 220,  30); // right at top
	ctx.rect(390,  10,  30, 250); // down at ב (after game)
	ctx.rect(390, 100, 100,  30); // right at ע fail
	ctx.rect(390, 260, 100,  30); // right after ע
	ctx.rect(460, 140,  30, 350); // ה choice
	ctx.rect(350, 460, 140,  30); // left at א fail
	ctx.save();
	ctx.translate(325, 292);
	ctx.rotate(-Math.PI/5);
	ctx.rect(0, 0, 30, 220); // up-left at א
	ctx.restore();
	//ctx.fill();
	//ctx.closePath();
	//ctx.beginPath();
	ctx.rect(260, 275,  90,  30); // left
	ctx.rect(260, 200,  30, 230); // down
	ctx.rect(190, 420, 220,  30); // נ choice
	ctx.rect(190, 270,  30, 210); // ה choice
	ctx.rect(190, 460, 150,  30); // right after ה fail
	ctx.rect( 10, 270, 210,  30); // left after ה
	ctx.rect(160, 200,  30, 100); // up at ל fail
	ctx.rect( 90, 120,  20, 180); // up at ל fail (circle)
	ctx.rect( 50, 120,  60,  20); // top of circle
	ctx.rect( 50, 120,  20, 180); // up at כ fail (circle)
	ctx.rect( 10, 270,  30, 180); // down after כ
	ctx.rect( 10, 330, 170,  30); // right at ה
	ctx.rect(150, 330,  30, 160); // down
	ctx.rect( 50, 400, 130,  30); // left at ע fail
	ctx.rect(  0, 460, 180,  30); // left to end
	ctx.save();
	ctx.rotate(Math.PI*45/180);
	ctx.fill();
	ctx.restore();
	ctx.closePath();
	ctx.beginPath();
	ctx.rect(310, 50, 70, 170);
	ctx.stroke();

	// paint text
	ctx.fillStyle = fontColor;
	ctx.textAlign = "center";
	ctx.font = welcomeFont;
	ctx.fillText('level 15', 25, 25);
	ctx.font = font;
	ctx.fillText('לְמַעַן'/*‪*/, 50, 100); // the seemingly empty comment contains U+202A
	ctx.fillText('וְהוֹרִישׁ'/*‪*/, 25, 110);
	ctx.fillText('יִרְבּוּ'/*‪*/, 135, 115);
	ctx.fillText('תֶּחֶזְקוּ'/*‪*/, 135, 90);
	ctx.fillText('יְמֵיכֶם'/*‪*/, 235, 175);
	ctx.fillText('בְּנֵיכֶם'/*‪*/, 215, 190);
	ctx.fillText('וִימֵי'/*‪*/, 285, 65);
	ctx.fillText('עַל'/*‪*/, 265, 78);
	ctx.fillText('בְנֵיכֶם'/*‪*/, 405, 45);
	ctx.fillText('זַרְעֲכֶם'/*‪*/, 425, 30);
	ctx.fillText('עַל'/*‪*/, 407, 130);
	ctx.fillText('הָאֲדָמָה'/*‪*/, 425, 115);
	ctx.fillText('הָאֲדָמָה'/*‪*/, 475, 290);
	ctx.fillText('כָּל'/*‪*/, 478, 265);
	ctx.fillText('אֲשֶׁר'/*‪*/, 460, 460);
	ctx.fillText('שֶנַתָּתִּי'/*‪*/, 445, 480);
	ctx.fillText('נִשְׁבַּע'/*‪*/, 275, 300);
	ctx.fillText('בֹּטֵחַ'/*‪*/, 275, 275);
	ctx.fillText('יְהוָה'/*‪*/, 260, 440);
	ctx.fillText('לָתֵת'/*‪*/, 290, 440);
	ctx.fillText('לַאֲבֹתֵיכֶם'/*‪*/, 205, 425);
	ctx.fillText('אֲשֶׁר'/*‪*/, 205, 445);
	ctx.fillText('לָתֵת'/*‪*/, 160, 290);
	ctx.fillText('כִּי'/*‪*/, 175, 270);
	ctx.fillText('לָהֶם'/*‪*/, 90, 290);
	ctx.fillText('אִם'/*‪*/, 100, 270);
	ctx.fillText('כִּימֵי'/*‪*/, 50, 290);
	ctx.fillText('אֶת'/*‪*/, 60, 270);
	ctx.fillText('הַשָּׁמַיִם'/*‪*/, 50, 345);
	ctx.fillText('אֶת'/*‪*/, 25, 365);
    ctx.save();
	ctx.translate(170, 450);
	ctx.rotate(-Math.PI/2);
	ctx.fillText('עַל-הָאָרֶץ'/*‪*/, 0, 0);
	ctx.restore();
    ctx.fillText('וְהָאָרֶץ'/*‪*/, 140, 415);
}
</script>
<div style="position: relative">
<canvas id="world" width="500" height="500">Sorry, but it appears that your browser doesn't support the required technologies. Please update your browser. If you're using Internet Explorer, it won't work anyways, so I highly recommend you switch to Firefox.</canvas>
<div id="locator" style="border: 1px solid black;width: 75px;height: 50px;position: absolute;top:0px;left:0px"></div>
</div>